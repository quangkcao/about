<!DOCTYPE html>
<html>
  <head>
  <title>Soso Configuration</title>
  <link rel='stylesheet' type='text/css' href='/vendors/pebble-slate/dist/css/slate.min.css'>
  <script src='/vendors/pebble-slate/dist/js/slate.min.js'></script>
  <style>
  .title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  </style>
  </head>

  <body>
    <h1 class='title'>Soso Configuration</h1>
    <div class='item-container'>
      <div class='item-container-header'>Theme</div>
      <div class='item-container-content'>
        <label class="item">
        <img src="/images/soso-red.png" width="50" height="auto" name="Red" class="theme-select"/>
        <img src="/images/soso-magenta.png" width="50" height="auto" name="Magenta" class="theme-select"/>
        <img src="/images/soso-fashionmagenta.png" width="50" height="auto" name="FashionMagenta" class="theme-select"/>
        <img src="/images/soso-kellygreen.png" width="50" height="auto" name="KellyGreen" class="theme-select"/>
        <img src="/images/soso-tiffanyblue.png" width="50" height="auto" name="TiffanyBlue" class="theme-select"/>
        <img src="/images/soso-cobaltblue.png" width="50" height="auto" name="CobaltBlue" class="theme-select"/>
        <img src="/images/soso-bluemoon.png" width="50" height="auto" name="BlueMoon" class="theme-select"/>
        </label>
      </div>
      <div class='item-container-footer'>
        Choose your favorite theme
      </div>
    </div>
  </body>
  <script>
  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }

  var themes = document.getElementsByClassName('theme-select');
  for(var i=0;i<themes.length;i++){
    themes[i].addEventListener('click', function(){
      var options = {
        'time_background_color': this.getAttribute('name')
      };
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      document.location = return_to + encodeURIComponent(JSON.stringify(options));
    }, false);
  }
  </script>
</html>
