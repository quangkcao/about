<!DOCTYPE html>
<html>
  <head>
  <title>Soso Configuration</title>
  <link rel='stylesheet' type='text/css' href='/vendors/pebble-slate/dist/css/slate.min.css'>
  <script src='/vendors/pebble-slate/dist/js/slate.min.js'></script>
  <style>
  .title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  </style>
  </head>

  <body>
    <h1 class='title'>Soso Configuration</h1>
    <div class='item-container'>
      <div class='item-container-header'>Customizability</div>
      <div class='item-container-content'>
        <label class="item">
          Themes
          <select id='time_background_color_picker' name="select-1" dir='rtl' class="item-select">
            <option class="item-select-option" value="Red">Red</option>
            <option class="item-select-option" value="Blue" selected>Blue</option>
          </select>
        </label>
        <img src="/images/soso-red.png" width="50" height="auto" name="Red" class="theme-select"/>
        <img src="/images/soso-purple.png" width="50" height="auto" name="Purple" class="theme-select"/>
        <img src="/images/soso-green.png" width="50" height="auto" name="Green" class="theme-select"/>
        <img src="/images/soso-blue.png" width="50" height="auto" name="Blue" class="theme-select"/>
      </div>
      <div class='item-container-footer'>
        Choose your favorite theme
      </div>
    </div>
  </body>
  <script>
  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }

  var themes = document.getElementsByClassName('theme-select');
  for(var i=0;i<themes.length;i++){
    themes[i].addEventListener('click', function(){
      var options = {
        'time_background_color': this.getAttribute('name')
      };
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      document.location = return_to + encodeURIComponent(JSON.stringify(options));
    }, false);
  }
  </script>
</html>
