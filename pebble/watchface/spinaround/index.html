<!DOCTYPE html>
<html>
  <head>
  <title>Soso Configuration</title>
  <link rel='stylesheet' type='text/css' href='/vendors/pebble-slate/dist/css/slate.min.css'>
  <script src='/vendors/pebble-slate/dist/js/slate.min.js'></script>
  <style>
  .title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  </style>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-25284477-1', 'auto');
    ga('send', 'pageview');
  </script>
  </head>

  <body>
    <h1 class='title'>SpinAround Configuration</h1>
    <div class='item-container'>
      <div class='item-container-header'>Theme</div>
      <div class='item-container-content'>
        <label class="item">
          <img src="/images/spinaround-orange.png" width="50" height="auto" name="0" title="Orange" class="theme-select"/>
        <img src="/images/spinaround-red.png" width="50" height="auto" name="1" title="Red" class="theme-select"/>
        <img src="/images/spinaround-magenta.png" width="50" height="auto" name="2" title="Magenta" class="theme-select"/>
        <img src="/images/spinaround-bluemoon.png" width="50" height="auto" name="3" title="BlueMoon" class="theme-select"/>
        <img src="/images/spinaround-maygren.png" width="50" height="auto" name="4" title="MayGreen" class="theme-select"/>
        </label>
      </div>
      <div class='item-container-footer'>
        Choose your favorite theme
      </div>
    </div>
  </body>
  <script>
  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }

  var themes = document.getElementsByClassName('theme-select');
  for(var i=0;i<themes.length;i++){
    themes[i].addEventListener('click', function(){
      var selectedTheme = this.getAttribute('title');
      ga('send', 'event', 'SpinAround Theme', 'tap', selectedTheme);
      var options = {
        'color': selectedTheme
      };
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      document.location = return_to + encodeURIComponent(JSON.stringify(options));
    }, false);
  }
  </script>
</html>
